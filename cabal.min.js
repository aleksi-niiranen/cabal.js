!function(e){var t={};t.VERSION="0.1.0";var r=function(e){this.result=e};r.prototype.preRender=function(e){var t=[],r={rendered:[],all:{}};return this.result.forEach(function(n){return 0===e.propertiesToRender.length?void t.push(a(r,n,e)):(n.forEach(function(t,n){var o=e.propertiesToRender.indexOf(t.Name);o>-1&&(r.rendered.push({ri:o,pi:n}),e.propertiesToRender.splice(o,1,null)),r.all[t.Name]=n}),e.propertiesToRender.forEach(function(e,t){null!==e&&r.rendered.push({ri:t})}),t.push(a(r,n,e)),void(e.propertiesToRender=[]))}),t};var n=function(e){return function(t,r,n){var a=void 0===e.children?t[r.pi].Value:e.children,i=o(e.attr,t,n);return i.children=a,{type:e.componentType,element:e.element,inputs:i}}},o=function(e,r,n){var o=t.mapper.property().constructor,a={};for(var i in e){var p=e[i];a[i]=p instanceof o?r[n[p.name]].Value:p}return a},a=function(e,t,r){var n=e.rendered.sort(function(e,t){return e.ri-t.ri}),o=n.map(function(n){return r.rowTemplate[n.ri](t,n,e.all)});return o};t.TableColumnHeaders=function(e){var t=e.map(function(e){return{type:"HeaderColumn",inputs:{children:e}}});return t},t.Properties=function(e){var t={};return t.propertiesToRender=e.map(function(e){return e.name}),t.rowTemplate=e.map(n),t},t.app=function(e){return new r(e)},r.prototype.Table=function(e,r){var n=this.preRender(e.properties);React.renderComponent(t.components.Table({headers:e.headers,data:n}),r)},r.prototype.List=function(e,r){var n=this.preRender(e.properties);React.renderComponent(t.components.List({data:n}),r)},"undefined"==typeof e.cabal&&(e.cabal=t)}(this),function(e){var t={},r={};r.mapToRow=function(e){if(!e)return[];var r=e.map(function(e){return React.DOM.td({},t[e.type]({element:e.element,inputs:e.inputs}))});return r},r.mapToRows=function(e){if(!e)return[];var r=e.map(function(e){return t.TableRow({rowData:e})});return r},r.mapToListItems=function(e){if(!e)return[];var t=e.map(function(e){return React.DOM.li({},r.mapToListItem(e))});return t},r.mapToListItem=function(e){if(!e)return[];var r=e.map(function(e){return t[e.type]({element:e.element,inputs:e.inputs})});return r},t.Link=React.createClass({render:function(){return React.DOM.a(this.props.inputs)}}),t.Image=React.createClass({render:function(){return this.props.inputs.src||(this.props.inputs.src=this.props.inputs.children),delete this.props.inputs.children,React.DOM.img(this.props.inputs)}}),t.HeaderColumn=React.createClass({render:function(){return React.DOM.th(this.props.inputs)}}),t.TextNode=React.createClass({render:function(){return React.DOM.span(this.props.inputs)}}),t.DateTime=React.createClass({render:function(){var e=new Date(this.props.inputs.children);return this.props.inputs.children=e.toLocaleString(),React.DOM.span(this.props.inputs)}}),t.react=React.createClass({render:function(){var e=this.props.element;return React.DOM[e](this.props.inputs)}}),t.TableRow=React.createClass({render:function(){return React.DOM.tr({},r.mapToRow(this.props.rowData))}}),t.TableHead=React.createClass({render:function(){return React.DOM.thead({},React.DOM.tr({},this.props.headers.map(function(e){return t[e.type]({inputs:e.inputs})})))}}),t.TableBody=React.createClass({render:function(){return React.DOM.tbody({},r.mapToRows(this.props.data))}}),t.Table=React.createClass({render:function(){return React.DOM.table({className:"cabal-table"},[t.TableHead({headers:this.props.headers}),t.TableBody({data:this.props.data})])}}),t.List=React.createClass({render:function(){return React.DOM.ul({className:"cabal-list"},[r.mapToListItems(this.props.data)])}}),t.extend=function(e,r){if("function"!=typeof r)throw new Error("Extensions must be functions.");if(void 0!==t[e])throw new Error("Overriding components is not allowed.");t[e]=React.createClass({render:r})},e.components=t}(cabal),function(e){var t={},r=function(e){this.name=e,this.componentType="TextNode"};r.prototype.attributes=function(e){return this.attr=e,this},r.prototype.as=function(e){if(void 0===e||null===e)throw new Error("PropertyMapping's componentType can't be undefined or null");return this.componentType=e,this},r.prototype.react=function(e){return this.componentType="react",this.element=e,this},t.property=function(e){var t=new r(e);return t},t.extend=function(e,t){if("function"!=typeof t)throw new Error("Extensions must be functions.");if(void 0!==r.prototype[e])throw new Error("Overriding properties or methods is not allowed.");return r.prototype[e]=t,t},e.mapper=t}(cabal);